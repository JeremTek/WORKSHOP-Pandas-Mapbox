# WORKSHOP Mapbox Pandas
A workshop about Mapbox GL to discover the world data visualization.

![Mapbox GL banner](./img/banner.png)

## Overview

### Introduction

BLA-BLA-BLA...

### Table of Contents

- [Overview](#overview)
    - [Introduction](#introduction)
    - [Table of Contents](#table-of-contents)
    - [Presences](#presences)
- [Prerequisites](#prerequisites)
- [Workshop](#workshop)
    1. [Data visualization with Mapbox GL](#data-visualization-with-mapbox-gl)
        1. [Display your first map](#display-your-first-map)
        2. [Mark a location in your map](#mark-a-location-in-your-map)
        3. [Resolve the performance problem](#resolve-the-performance-problem)
    2. [Display your own data](#display-your-own-data)
        1. [Discover the open data movement and choose you own dataset](#discover-the-open-data-movement-and-choose-you-own-dataset)
        2. [Clean your dataset](#clean-your-dataset)
        3. [Import your dataset](#import-your-dataset)
        4. [Display your dataset with Mapbox GL](#display-your-dataset-with-mapbox-gl)
- [Discover More](#discover-more)

### Presences
Fork the repository (set yourself as the owner) and commit with your name to be marked present. example: [PRESENCE] : Tomas PROUST

## Prerequisites

For this workshop you will require:
- Python3 (>= 3.7)
    you can install it with the package manager of your choice:
    ```bash
    # Fedora
    sudo dnf install python3
    # Ubuntu and Debian based Distro
    sudo apt-get install python3
    # Arch Linux
    sudo pacman -Sy python-pip
    ```
- Python Pandas library:
    ```bash
    pip install pandas
    ```

## Workshop
by any needs, here the [Mapbox GL documentation](https://docs.mapbox.com/mapbox-gl-js/example/simple-map/).

### Data visualization with MapBox GL
In the first of this workshop we're gonna find out the basics of Mapbox GL.
We'll display a map in our navigator thanks to Mapbox GL,
and then we will play a bit with it by marking locations on the map.

#### Display your first map
We'll be displaying the map with a plain html defining a [Map object](https://docs.mapbox.com/mapbox-gl-js/api/map/), following this [example](https://docs.mapbox.com/mapbox-gl-js/example/simple-map/) show.

You will need to provide an access token to generate the map. It is generated at sign up and as it needs to give your credit card details here an access token you can use: 
```js
mapboxgl.accessToken = 'pk.eyJ1Ijoib2R1LXZlbG8iLCJhIjoiY2xjajl4MGh2MGc5ajN1cWg5anRnbnA3bCJ9.A1vMA06W6lyvtb3KDZW-Kg';
```
Be careful, to be displayed the Mapbox GL object need a "map" division tag, which itself must have css dimensions defined.

To watch your map, you can use the [VS Code Live Server extension](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer) or open your local html file with your navigator (e.g: ctrl + O on firefox).

#### Mark a location in your map
Next we'll add a marker to the map by defining a [Marker object](https://docs.mapbox.com/mapbox-gl-js/api/markers/#marker).
you can follow check this [example](https://docs.mapbox.com/mapbox-gl-js/example/add-a-marker/).

You can visit the [bbox finder](http://bboxfinder.com) website to find a location to highlight or pick one of these:
Name | longitude | latitude
--- | :---: | ---
Epitech | 2.363021 | 48.815307
Londres | -0.118092 | 51.509865
New York | 40.779897 | -73.968565
Paris | 2.349014 | 48.864716 
Seoul | 37.566535 | 126.9779692
Tokyo | 35.6894 | 139.692

#### Resolve the performance problem
Markers are cool but incompatible with big datasets visualization, as it uses JavaScript to be rendered.
To display a large dataset on map, we must use a [Vector Tileset](https://docs.mapbox.com/mapbox-gl-js/api/sources/#vectortilesource).
A vector tilesets is a tile generated by Mapbox GL from imported data, it can be retrieved in our code with an its ID.

As it needs to sign up to generate your own vector tileset you can use the tileset of this [example](https://docs.mapbox.com/mapbox-gl-js/example/data-driven-circle-colors). We'll see how to generate our own data in later steps.

### Display your own data
In this part, we'll see how to find, clean, import and then display your
own dataset on a map with Mapbox GL and Pandas for the cleaning.

#### Discover the open data movement and choose you own dataset
For this part you are free to download any .csv file that contains geographic data (Longitude and Latitude).
You can find them on https://www.data.gouv.fr/fr/pages/donnees-geographiques/ or any other source. 
Open it manually to check if there are the Longitude or latitude columns (could be called long and lat).
Warning: - Some .csv have different column separators ("," or ";"), you can open your .csv file in your text editor to check.

#### Clean your dataset
 Most datasets aren't "clean": Some data could be missing or unreadable.
 You can use Python and the Pandas library to clean your dataset:
1. Import the pandas library into your runnable Python file with `import pandas as pd`.
2. Read your .csv dataset and save it in a pandas dataframe.
3. Verify that the coordinates decimals are separated by "." and not by ",".
4. Use pandas to create a dataframe that only has the data you want to display on the map.
5. Export your dataframe to a .csv

### Import your dataset
1. Create an account on Mapbox
2. Upload your dataset as a Tileset on Mapbox studio (https://studio.mapbox.com/tilesets/)

#### Display your dataset with Mapbox GL
1. Use the part 1 of this workshop
2. Change the token we gave you in part 1 to your mapbox token, you can find it on your account page.
3. Change the tileset called in Part 1 to yours
4. Display your dataset.

## Discover More
If you enjoyed this workshop you can see for more [use cases](https://docs.mapbox.com/mapbox-gl-js/example/) of mapbox GL (check this [this one](https://docs.mapbox.com/mapbox-gl-js/example/dancing-buildings/) which control the city building over the sound of your mic).  
You can also check the [MapLibre Project](https://maplibre.org/), an open-source fork of the Mapbox GL library.